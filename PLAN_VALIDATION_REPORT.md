# ุชูุฑูุฑ ุชูููู ุชูุงูู ุงูุชุทุจูู ูุน ุงูุฎุทุฉ ุงููุญุฏุฏุฉ
## Rasid UQN - ุงููุญุต ุงูุดุงูู ูุงูุชุญูู

---

## ๐ ููุฎุต ุงูุชูููู

| ุงูุนูุตุฑ | ุงูุญุงูุฉ | ุงูููุงุญุธุงุช |
|--------|--------|---------|
| **ุงูุจููุฉ ุงููุนูุงุฑูุฉ ุงูุฃุณุงุณูุฉ** | โ ููุฌูุฏุฉ | Cloud Run + Firestore + Flutter |
| **ุชูููู ุงููุตุงุฏุฑ (7 ูุฆุงุช)** | โ๏ธ ุฌุฒุฆูุงู | ูุญุชุงุฌ ุชูููู ุดุงูู |
| **ูููุฐุฌ ุงูุจูุงูุงุช** | โ ููุฌูุฏ | Firestore collections ูุนุฑููุฉ |
| **ูุธุงู ุงูุฅุดุนุงุฑุงุช** | โ๏ธ ุฌุฒุฆูุงู | FCM ููุฌูุฏุ ููู ูุญุชุงุฌ ุชูุนูู ูุงูู |
| **ุชุทุจูู Flutter** | โ ููุฌูุฏ | ูุนูุงุฑูุฉ Clean Architecture |
| **ูุงุฌูุฉ RTL** | โ ููุฌูุฏุฉ | ุฏุนู ุงูุนุฑุจูุฉ ูุงูู |
| **ุงููุฒุงููุฉ ูุงููุณุฎ ุงูุงุญุชูุงุทูุฉ** | โ๏ธ ุฌุฒุฆูุงู | ูุญุชุงุฌ ุชุญุณูู |

---

## โ ูุง ุชู ุชูููุฐู ุจุดูู ุตุญูุญ

### 1. **ุงูุจููุฉ ุงููุนูุงุฑูุฉ ุงูุฃุณุงุณูุฉ** โ
```
โ Cloud Run Scraper (Node.js)
โ Firestore Database
โ Firebase Auth
โ Firebase Messaging (FCM)
โ Flutter Client App
โ Firebase Hosting Deployment
```

### 2. **ุชุทุจูู Flutter** โ
```
โ ูุนูุงุฑูุฉ Clean Architecture
โ BLoC Pattern ููุญุงูุฉ
โ Routing ูุน GoRouter
โ ุฏุนู RTL ุงูุนุฑุจู
โ Hive ููุชุฎุฒูู ุงููุญูู
โ Firebase Integration
โ Offline Support
```

### 3. **ูููุฐุฌ ุงูุจูุงูุงุช** โ
```
โ articles collection
โ sources collection
โ users collection
โ favorites subcollection
โ Firestore indexes
```

### 4. **ุงูุชูููููุฌูุงุช ุงููุณุชุฎุฏูุฉ** โ
```
โ Firebase Core & Auth
โ Cloud Firestore
โ Firebase Messaging
โ Firebase Analytics
โ Firebase Remote Config
โ PDF Viewer (Syncfusion)
โ Local Notifications
```

---

## โ๏ธ ูุง ูุญุชุงุฌ ุฅูู ุชุญุณูู ุฃู ุฅููุงู

### 1. **ุชูููู ุงููุตุงุฏุฑ ุงูู 7 ุงูุฑุณููุฉ** (Priority: ๐ด ุนุงููุฉ)

**ุงูุญุงูุฉ ุงูุญุงููุฉ:** ุบูุฑ ููุชูู
**ุงููุทููุจ:**

```javascript
// Sources configuration ูู Firestore
const sources = [
  {
    id: "cabinet_decisions",
    name_ar: "ูุฑุงุฑุงุช ูุฌูุณ ุงููุฒุฑุงุก",
    name_en: "Cabinet Decisions",
    cat_id: 9,
    url: "https://uqn.gov.sa/category?cat=9",
    enabled: true,
    icon: "gavel",
    color: "#1976D2",
    order: 1
  },
  // ... (ุงูู 6 ุงูุฃุฎุฑู)
];
```

**ุงูุฎุทูุงุช:**
- [ ] ุฅูุดุงุก documents ูุฌููุน ุงููุตุงุฏุฑ ูู Firestore
- [ ] ุชูุนูู Remote Config ูุชูุฒูุน ุงูุฅุนุฏุงุฏุงุช
- [ ] ุงูุชุญูู ูู ุงุณุชุฎุฑุงุฌ ุงูููุงูุงุช ููู ูุฆุฉ

---

### 2. **ุฎุงุฏู Cloud Run - ูุณุฎุฉ ุงูุฅูุชุงุฌ** (Priority: ๐ด ุนุงููุฉ)

**ุงูุญุงูุฉ ุงูุญุงููุฉ:** ุฃุณุงุณูุ ูุญุชุงุฌ ุชุญุณููุงุช
**ุงููุทููุจ:**

```typescript
// Backend improvements needed:

// 1. ุงุณุชุฎุฑุงุฌ ุงูููุงูุงุช ุงููุชูุฏู
โ Puppeteer/Cheerio ูููุฑุงุกุฉ ุงูุฏููุงููููุฉ
โ๏ธ ูุนุงูุฌุฉ "Load More" ุชููุงุฆูุงู
โ๏ธ ุงุณุชุฎุฑุงุฌ content_html ู pdf_url

// 2. ูุนุงูุฌุฉ ุงูุฃุฎุทุงุก ูุงูุฅุนุงุฏุฉ
โ Exponential backoff
โ๏ธ ุชุณุฌูู ุงูุฃุฎุทุงุก ูู Firestore
โ๏ธ ุงูุชูุจููุงุช ุนูุฏ ุงููุดู

// 3. ุงูุชุญุณููุงุช:
โ๏ธ ูุนุงูุฌุฉ ูุนุฑูุงุช ุงูููุงูุงุช ุงููุฑูุฏุฉ
โ๏ธ ุฏุนู ุงููุฒุงููุฉ ุงูุฅุถุงููุฉ
โ๏ธ ุชุญุณูู ุงูุฃุฏุงุก ูุงูุฐุงูุฑุฉ
```

**ุงููููุงุช ุงููุทููุจุฉ:**
- [ ] `backend/src/scraper/parser.ts` - ุชุญุณูู
- [ ] `backend/src/scraper/browser.ts` - ุชุญุณูู
- [ ] `backend/src/scraper/storage.ts` - ุชุญุณูู

---

### 3. **ูุธุงู ุงูุฅุดุนุงุฑุงุช ุงููุงูู** (Priority: ๐ก ูุชูุณุทุฉ)

**ุงูุญุงูุฉ ุงูุญุงููุฉ:** ุงูุฃุณุงุณ ููุฌูุฏ
**ุงููุทููุจ:**

```typescript
// Cloud Function ูุทููุจุฉ:

// 1. Firestore Trigger
exports.onArticleCreated = functions.firestore
  .document('articles/{articleId}')
  .onCreate(async (snap, context) => {
    // ุฅุฑุณุงู FCM data message
    // ุงุณุชุฎุฑุงุฌ ุงูููุฎุต
    // ุฅุฑุณุงู ุฅูู topics
  });

// 2. Local Notifications Scheduling
โ flutter_local_notifications ูุชุซุจุชุฉ
โ๏ธ ุชูุงูู ูุงูู ูุน ูุนุงูุฌ FCM
โ๏ธ ุฌุฏููุฉ ุงูุฅุดุนุงุฑุงุช ุญุณุจ ุฃููุงุช ุงููุณุชุฎุฏู

// 3. User Subscriptions
โ ุชุฎุฒูู ูู Firestore
โ๏ธ ูุงุฌูุฉ ุงููุณุชุฎุฏู ููุงุดุชุฑุงู
โ๏ธ ุชุญุฏูุซ ุฏููุงูููู ููุงุดุชุฑุงูุงุช
```

---

### 4. **ูุงุฌูุฉ ุงููุณุชุฎุฏู - ุงูููุฒุงุช ุงููุชูุฏูุฉ** (Priority: ๐ก ูุชูุณุทุฉ)

**ููุชูู:**
- โ ุตูุญุงุช ุงูุชุจููุจ ุงูุฃุณุงุณูุฉ
- โ ูุงุฆูุฉ ุงูููุงูุงุช
- โ ุตูุญุฉ ุงูุชูุงุตูู
- โ ุงูููุถูุฉ
- โ ุงูุจุญุซ
- โ ุงูุฅุนุฏุงุฏุงุช

**ูุทููุจ ุชุญุณูู:**
- โ๏ธ ุนุฑุถ PDF ุงููุชูุฏู
- โ๏ธ ุชุตุฏูุฑ ุฅูู ุตูุฑุฉ/PDF
- โ๏ธ ูุดุงุฑูุฉ ูุชูุฏูุฉ
- โ๏ธ ูุญุฑุฑ ุงูุจุญุซ ุงููุชูุฏู
- โ๏ธ ุชุฎุฒูู ูุคูุช ุฐูู

---

### 5. **ููุงููู ุงูุฃูุงู (Firestore & Storage)** (Priority: ๐ด ุนุงููุฉ)

**ุงูุญุงูุฉ ุงูุญุงููุฉ:** ุฃุณุงุณู
**ุงููุทููุจ:**

```firestore
// firestore.rules - ุชุญุณููุงุช ูุทููุจุฉ

// ุงููุตุงุฏุญ ุงูุญุงููุฉ:
โ๏ธ ูุฑุงุกุฉ/ูุชุงุจุฉ ุงูููุงูุงุช ุชุญุชุงุฌ ุชูููุฏ
โ๏ธ ููุงููู ุงููุณุชุฎุฏููู ูุฌุจ ุชุดุฏูุฏูุง
โ ุงูููุถูุฉ ูุญููุฉ ุจุดูู ุตุญูุญ

// ุงูุชุญุณููุงุช ุงููุทููุจุฉ:
- [ ] ุถูุงู ุฃู write ุนูู articles ููุท ููุฎุฏูุงุช
- [ ] ุชูููุฏ read ุนูู ุงูุญููู ุงูุญุณุงุณุฉ
- [ ] ููุฑุณุฉ ูุญุณููุฉ ููุงุณุชุนูุงูุงุช
```

---

### 6. **ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ ูุงูุงุณุชุฑุฌุงุน** (Priority: ๐ก ูุชูุณุทุฉ)

**ูุทููุจ ุฅุนุฏุงุฏู:**

```bash
# Google Cloud Backup
- [ ] ุฌุฏูู ูููู ูููุณุฎ ุงูุงุญุชูุงุทูุฉ
- [ ] ุชุฎุฒูู ุทููู ุงููุฏู
- [ ] ุฎุทุฉ ุงูุงุณุชุฑุฌุงุน ูู ุญุงูุฉ ุงูุทูุงุฑุฆ

# Firestore Export
- [ ] ุชุตุฏูุฑ ุฏูุฑู ููุจูุงูุงุช
- [ ] ุญูุธ ูู Cloud Storage
```

---

## ๐ ูุงุฆูุฉ ุงูููุงู ุงููุทููุจุฉ

### ุงููุฑุญูุฉ ุงูุฃููู - ุงูุฃุณุงุณ (ุงูุฃุณุจูุน ุงูุฃูู)

- [ ] **1. ููุก ุจูุงูุงุช ุงููุตุงุฏุฑ** 
  - [ ] ุฅูุดุงุก 7 documents ูููุตุงุฏุฑ ูู Firestore
  - [ ] ุงุฎุชุจุงุฑ ุงุณุชุฎุฑุงุฌ ูู ูุฆุฉ
  - [ ] ุงูุชุญูู ูู ูุนุฑูุงุช ุงูููุงูุงุช ุงููุฑูุฏุฉ

- [ ] **2. ุชุญุณูู ุฎุงุฏู Cloud Run**
  - [ ] ุชูููุฉ ููุฏ ุงููุญูู (parser.ts)
  - [ ] ุฅุถุงูุฉ ูุนุงูุฌุฉ "Load More"
  - [ ] ุงุฎุชุจุงุฑ full/incremental sync

- [ ] **3. ุชูุนูู ูุธุงู ุงูุฅุดุนุงุฑุงุช**
  - [ ] ูุชุงุจุฉ Cloud Function ููู Firestore Trigger
  - [ ] ุงุฎุชุจุงุฑ FCM data messages
  - [ ] ุฑุจุท ูุนุงูุฌ FCM ูู ุงูุชุทุจูู

---

### ุงููุฑุญูุฉ ุงูุซุงููุฉ - ุงูุชุญุณููุงุช (ุงูุฃุณุจูุน ุงูุซุงูู)

- [ ] **4. ุชุทููุฑ ูุงุฌูุฉ ุงููุณุชุฎุฏู**
  - [ ] ุฅุถุงูุฉ ุตูุญุฉ ุชูุงุตูู ูุญุณููุฉ
  - [ ] ุนุงุฑุถ PDF ูุชูุฏู
  - [ ] ุฎูุงุฑุงุช ุงูุชุตุฏูุฑ

- [ ] **5. ุชุญุณูู ุงูุฃุฏุงุก**
  - [ ] pagination ููููุงุฆู ุงููุจูุฑุฉ
  - [ ] ุชุญุณูู ุงูุชุฎุฒูู ุงููุญูู
  - [ ] ุชุญุณูู ุงุณุชููุงู ุงูุฐุงูุฑุฉ

- [ ] **6. ููุงููู ุงูุฃูุงู**
  - [ ] ุชุญุฏูุซ firestore.rules
  - [ ] ุงุฎุชุจุงุฑ ุงูุฃูุงู
  - [ ] ุชูุนูู Firebase Security Rules

---

### ุงููุฑุญูุฉ ุงูุซุงูุซุฉ - ุงูุฅูุชุงุฌ (ุงูุฃุณุจูุน ุงูุซุงูุซ)

- [ ] **7. ุงููุณุฎ ุงูุงุญุชูุงุทูุฉ**
  - [ ] ุฅุนุฏุงุฏ Firestore Backups
  - [ ] ุชูุซูู ุฎุทุฉ ุงูุงุณุชุฑุฌุงุน

- [ ] **8. ุงููุฑุงูุจุฉ ูุงูุชุญููู**
  - [ ] ุชูุนูู Firebase Analytics
  - [ ] ุฅุนุฏุงุฏ Monitoring
  - [ ] ุชุญุฏูุฏ KPIs

- [ ] **9. ุงูุงุฎุชุจุงุฑ ุงูุดุงูู**
  - [ ] ุงุฎุชุจุงุฑ ุนูู ุฃุฌูุฒุฉ ุญููููุฉ
  - [ ] ุงุฎุชุจุงุฑ ุงููุถุน ุงูุนุฑุงููู
  - [ ] ุงุฎุชุจุงุฑ ุงูุฃุฏุงุก ุชุญุช ุงูุชุญููู

---

## ๐ ุงููุคุดุฑุงุช ุงููููุฉ ูููุฑุงูุจุฉ

```
โ ุนุฏุฏ ุงูููุงูุงุช ุงููุณุชุฎุฑุฌุฉ ููููุงู: Target = 50+
โ ููุช ุงุณุชุฎุฑุงุฌ ูุตุฏุฑ ูุงุญุฏ: Target < 2 ุฏูุงุฆู
โ ุญุฌู Firestore reads: Target < 5000/ููู
โ ุญุฌู Firestore writes: Target < 1000/ููู
โ ุชุตุญุญ ุงูุฅุดุนุงุฑุงุช: Target > 95%
โ ุชููุฑ ุงูุชุทุจูู: Target > 99.5%
```

---

## ๐ ูุชุงุฆุฌ ุงูุชูููู ุงูุชูุตูููุฉ

### โ ููุงุท ุงูููุฉ

1. **ูุนูุงุฑูุฉ ุณูููุฉ**: ุงูุจููุฉ ุชุชุจุน Clean Architecture ุจุดูู ุตุญูุญ
2. **ุชูุงูู Firebase ูุงูู**: ุฌููุน ุงูุฎุฏูุงุช ุงูุฃุณุงุณูุฉ ููุนููุฉ
3. **ุฏุนู RTL ูุชูุฏู**: ุงูุนุฑุจูุฉ ูุฏุนููุฉ ุจุงููุงูู
4. **ูุนูุงุฑ ุงูุฅูุชุงุฌ**: ุงูููุฏ ููุธู ููุงุจู ููุตูุงูุฉ

### โ๏ธ ููุงุท ุงูุชุญุณูู

1. **ุชูุงุตูู ุงููุตุงุฏุฑ**: ุชุญุชุงุฌ ุชูููู ุดุงูู ููุฑุงูุจุฉ
2. **ูุธุงู ุงูุฅุดุนุงุฑุงุช**: ูุญุชุงุฌ ุชูุงูู ุฃุนูู ูุน Cloud Functions
3. **ุงูุฃุฏุงุก**: ุชุญุชุงุฌ ุชุญุณููุงุช ูู ุงูุชุฎุฒูู ุงููุญูู ูุงูู pagination
4. **ุงูุฃูุงู**: ููุงููู Firestore ุชุญุชุงุฌ ุชุดุฏูุฏ

---

## ๐ฏ ุงูุชูุตูุงุช

1. **ุฃููููุฉ ุนุงููุฉ**: ุชูููุฉ ุชูููู ุงููุตุงุฏุฑ ูุงุฎุชุจุงุฑ ุงูุงุณุชุฎุฑุงุฌ
2. **ุฃููููุฉ ุนุงููุฉ**: ุชูุนูู ูุธุงู ุงูุฅุดุนุงุฑุงุช ุงููุงูู
3. **ุฃููููุฉ ูุชูุณุทุฉ**: ุชุญุณูู ุฃุฏุงุก ุงูุงุณุชุนูุงูุงุช ูุงูู caching
4. **ุฃููููุฉ ูุชูุณุทุฉ**: ุชุดุฏูุฏ ููุงููู ุงูุฃูุงู

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ ุงูููุฑูุฉ

```bash
# 1. ูุญุต ุงูุงุณุชุฎุฑุงุฌ ุงูุญุงูู
firebase functions:log

# 2. ุงุฎุชุจุงุฑ ูุตุฏุฑ ูุงุญุฏ
curl -X POST https://your-backend.run.app/scrape/source/cabinet_decisions

# 3. ุงูุชุญูู ูู ุงูุจูุงูุงุช
firebase firestore:inspect articles --json | head -20

# 4. ุจุฏุก ุงููุฑุงูุจุฉ
firebase functions:log --tail
```

---

**ุงูุชูููู ุงูููุงุฆู**: ุงูุชุทุจูู ุนูู **ุงููุณุงุฑ ุงูุตุญูุญ** โ 
**ูุณุชูู ุงูุงูุชูุงู**: **70%** - ูุญุชุงุฌ ุชุญุณููุงุช ูู ุงูุชูุงุตูู
**ุญุงูุฉ ุงูุฅูุชุงุฌ**: **ุฌุงูุฒ ููุงุฎุชุจุงุฑ** ูุน ุชุญุณููุงุช ูุญุฏูุฏุฉ

---

*ุขุฎุฑ ุชุญุฏูุซ: 2025-12-09*
*ุงูุญุงูุฉ: ุชูููู ุดุงูู ููุชูู*

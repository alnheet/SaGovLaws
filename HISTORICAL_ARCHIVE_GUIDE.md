# ๐ ูุธุงู ุฃุฑุดูุฉ ุงูุฃุฎุจุงุฑ ุงูุชุงุฑูุฎูุฉ

## ููุฏูุฉ

**ุงููุดููุฉ ุงูุฃุตููุฉ**: ุงูุชุทุจูู ูู ูุฌูุจ ุงูุฃุฎุจุงุฑ ุงููุฏููุฉ ููุฎุฒููุง ููุง ููุถุญ ูู ุงูุฎุทุฉ

**ุงูุญู**: ุชู ุฅูุดุงุก ูุธุงู ุดุงูู ูุฌูุจ ูุชุฎุฒูู ุงูุฃุฎุจุงุฑ ุงูุชุงุฑูุฎูุฉ ูู ุฌููุน ุงููุตุงุฏุฑ

---

## ๐ฏ ุงููููุฒุงุช

### โ ุฌูุจ ุงูุฃุฎุจุงุฑ ุงููุฏููุฉ
- ุฌูุจ ูู ุฌููุน ุงูุตูุญุงุช ุงููุฏููุฉ ููู ูุตุฏุฑ
- ูุนุงูุฌุฉ ุงูุชุงุฑูุฎ ุงููุฌุฑู ูุงููููุงุฏู ุชููุงุฆูุงู
- ุงุณุชุฎุฑุงุฌ ุงูุฑูุงุจุท ูุงูู PDFs

### โ ุชุฌูุจ ุงูุชูุฑุงุฑ
- ูุญุต ุชููุงุฆู ููููุงูุงุช ุงูููุฌูุฏุฉ
- ุนุฏู ุฅุนุงุฏุฉ ุชุฎุฒูู ููุณ ุงูููุงูุฉ

### โ ุชุฎุฒูู ูุนูุงู
- ุชุฎุฒูู ูู Firestore ูุน ุนูุงูุฉ `is_archive: true`
- ูุนุฑู ูุฑูุฏ ููู ููุงูุฉ: `source_key_article_number`
- ุชุงุฑูุฎ ุงูุฒุญู ูุงูุชุญุฏูุซ

### โ ูุนุงูุฌุฉ ุฃุฎุทุงุก ูููุฉ
- ูุญุงููุฉ ุงุณุชุฎุฑุงุฌ ูู ุตูุบ ูุชุนุฏุฏุฉ
- ุชุฎุทู ุงูุตูุญุงุช ุงููุงุฑุบุฉ ุชููุงุฆูุงู
- ุชูุงุฑูุฑ ุฎุทุฃ ููุตูุฉ

---

## ๐ ุงููููุงุช ุงูุฌุฏูุฏุฉ

### 1. `backend/src/scraper/historical_archive.ts` (444 ุณุทุฑ)

ุงููุฆุฉ ุงูุฑุฆูุณูุฉ ูุฅุฏุงุฑุฉ ุงูุฃุฑุดููุฉ:

```typescript
class HistoricalArchiveScraper {
  // ุฌูุจ ุฃุฑุดูู ูุตุฏุฑ ูุงุญุฏ
  async archiveSource(sourceKey, sourceName, baseUrl, category, maxPages)
  
  // ุฌูุจ ุงูุฃุฑุดูู ุงููุงูู
  async archiveAllSources(sourceConfigs)
  
  // ุงุณุชุฎุฑุงุฌ ูู ุตูุญุฉ ูุงุญุฏุฉ
  private async scrapePageArchive()
  
  // ูุนุงูุฌุฉ ุงูุชูุงุฑูุฎ ุงููุฌุฑูุฉ
  private hijriToGregorian()
}
```

### 2. `backend/src/routes/archive.ts` (220 ุณุทุฑ)

ููุงุท ุงูููุงูุฉ API:

```
POST   /api/archive/full                      # ุฃุฑุดูุฉ ุดุงููุฉ
POST   /api/archive/source/:sourceKey          # ุฃุฑุดูุฉ ูุตุฏุฑ ูุงุญุฏ
GET    /api/archive/status/:archiveId          # ุญุงูุฉ ุงูุฃุฑุดูุฉ
GET    /api/archive/stats                      # ุงูุฅุญุตุงุฆูุงุช
```

---

## ๐ ููููุฉ ุงูุงุณุชุฎุฏุงู

### 1. ุฃุฑุดูุฉ ุดุงููุฉ ูุฌููุน ุงููุตุงุฏุฑ

```bash
curl -X POST http://localhost:8080/api/archive/full
```

**ุงูุฑุฏ**:
```json
{
  "success": true,
  "archiveId": "full_1734345612345",
  "stats": {
    "totalSources": 7,
    "completedSources": 7,
    "totalArticles": 15420,
    "newArticles": 15000,
    "errors": 420
  },
  "results": {
    "cabinet_decisions": {
      "total": 2200,
      "newArticles": 2000,
      "errors": []
    },
    "royal_orders": { ... },
    ...
  }
}
```

### 2. ุฃุฑุดูุฉ ูุตุฏุฑ ูุงุญุฏ

```bash
# ุงูุชุฑุงุถู: 100 ุตูุญุฉ
curl -X POST http://localhost:8080/api/archive/source/cabinet_decisions

# ูุฎุตุต: 200 ุตูุญุฉ
curl -X POST http://localhost:8080/api/archive/source/cabinet_decisions \
  -H "Content-Type: application/json" \
  -d '{"maxPages": 200}'
```

### 3. ูุญุต ุงูุญุงูุฉ

```bash
curl http://localhost:8080/api/archive/status/full_1734345612345
```

**ุงูุฑุฏ**:
```json
{
  "success": true,
  "archiveId": "full_1734345612345",
  "status": {
    "status": "completed",
    "startTime": "2025-12-09T10:00:00Z",
    "endTime": "2025-12-09T10:45:30Z",
    "results": { ... }
  }
}
```

### 4. ุงูุฅุญุตุงุฆูุงุช

```bash
curl http://localhost:8080/api/archive/stats
```

**ุงูุฑุฏ**:
```json
{
  "success": true,
  "stats": {
    "totalArticles": 25000,
    "archiveArticles": 23000,
    "recentArticles": 2000,
    "archiveJobs": 5,
    "runningJobs": 0,
    "completedJobs": 5
  }
}
```

---

## ๐พ ุงูุจูุงูุงุช ุงููุฎุฒูุฉ

### ูููุฐุฌ ุงูููุงูุฉ ุงูุชุงุฑูุฎูุฉ

```typescript
interface HistoricalArticle {
  id: string;                      // "cabinet_decisions_28661"
  article_number: string;          // "28661"
  title: string;                   // ุงูุนููุงู
  description: string;             // ุงููุตู
  url: string;                     // ุงูุฑุงุจุท ุงูุฃุตูู
  pdf_url?: string;                // ุฑุงุจุท PDF ุฅู ูุฌุฏ
  published_date: Date;            // ุงูุชุงุฑูุฎ ุงููููุงุฏู
  published_date_hijri?: string;   // ุงูุชุงุฑูุฎ ุงููุฌุฑู
  source_key: string;              // "cabinet_decisions"
  source_name: string;             // "ูุฑุงุฑุงุช ูุฌูุณ ุงููุฒุฑุงุก"
  category: string;                // ุงููุฆุฉ
  is_archive: true;                // ุนูุงูุฉ ุงูุฃุฑุดููุฉ
  crawled_at: Date;                // ูุชู ุชู ุงูุฒุญู
  is_valid: boolean;               // ูู ุงูุจูุงูุงุช ุตุญูุญุฉ
}
```

### ูู Firestore

```
Collection: articles
โโโ Document: cabinet_decisions_28661
โ   โโโ id: "cabinet_decisions_28661"
โ   โโโ title: "ูุฑุงุฑ ูุฌูุณ ุงููุฒุฑุงุก ุฑูู..."
โ   โโโ is_archive: true
โ   โโโ published_date: 2025-10-15
โ   โโโ ...
โ
โโโ Document: royal_orders_15234
โ   โโโ is_archive: true
โ   โโโ ...
โ
โโโ ... (ุขูุงู ุงูููุงูุงุช ุงูุฃุฎุฑู)
```

---

## ๐ ุงูุฅุญุตุงุฆูุงุช ุงููุชููุนุฉ

### ุจุนุฏ ุงูุฃุฑุดูุฉ ุงูุดุงููุฉ

| ุงููุตุฏุฑ | ุงูุฃุฎุจุงุฑ ุงููุชููุนุฉ | ุงููุทุงู ุงูุฒููู |
|--------|-----------------|-------------|
| ูุฑุงุฑุงุช ูุฌูุณ ุงููุฒุฑุงุก | 2000+ | 5 ุณููุงุช |
| ุฃูุงูุฑ ููููุฉ | 1500+ | 5 ุณููุงุช |
| ูุฑุงุณูู ููููุฉ | 1800+ | 5 ุณููุงุช |
| ูุฑุงุฑุงุช ูุฃูุธูุฉ | 2500+ | 5 ุณููุงุช |
| ููุงุฆุญ ูุฃูุธูุฉ | 2000+ | 5 ุณููุงุช |
| ูุฑุงุฑุงุช ูุฒุงุฑูุฉ | 2200+ | 5 ุณููุงุช |
| ููุฆุงุช | 1500+ | 5 ุณููุงุช |
| **ุงูุฅุฌูุงูู** | **15,000+** | - |

---

## โฑ๏ธ ุงูุฃุฏุงุก ุงููุชููุน

```
ุฃุฑุดูุฉ ูุตุฏุฑ ูุงุญุฏ (100 ุตูุญุฉ):     ~5-10 ุฏูุงุฆู
ุฃุฑุดูุฉ ูุตุฏุฑูู (200 ุตูุญุฉ):        ~15-20 ุฏูููุฉ
ุฃุฑุดูุฉ ุดุงููุฉ (7 ูุตุงุฏุฑ):          ~90-120 ุฏูููุฉ
```

---

## ๐ง ุงูุชุฎุตูุต

### ุชุบููุฑ ุนุฏุฏ ุงูุตูุญุงุช

```bash
# 500 ุตูุญุฉ
curl -X POST http://localhost:8080/api/archive/source/cabinet_decisions \
  -H "Content-Type: application/json" \
  -d '{"maxPages": 500}'
```

### ุชุฎุตูุต ูุนุฏู ุงูุชุฃุฎูุฑ

ูููู ุชุนุฏูู `this.delay(500)` ูู `historical_archive.ts`:

```typescript
// ุฃุณุฑุน (ุฃูุซุฑ ุญููุงู ุนูู ุงูุฎุงุฏู)
await this.delay(200);

// ุฃุจุทุฃ (ุฃูู ุญููุงู)
await this.delay(2000);
```

---

## ๐ ุงุณุชูุดุงู ุงูุฃุฎุทุงุก

### ุงููุดููุฉ: ูุง ุชูุฌุฏ ููุงูุงุช

```
ุงูุญู:
1. ุชุญูู ูู ุงูู selectors ูู parsePageArchive()
2. ุงูุชุญ ุงููููุน ูุฏููุงู ูุชููุฏ ุงูู HTML
3. ุญุฏุซ ุงูู selectors ุญุณุจ ุงูุชุฎุทูุท ุงูุญุงูู
```

### ุงููุดููุฉ: ูุนุฑูุงุช ุชูุฑุงุฑ

```
ุงูุญู:
1. ุชุญูู ูู extractArticleNumber()
2. ุฃุถู ุทุฑู ุงุณุชุฎุฑุงุฌ ุฌุฏูุฏุฉ
3. ุงุฎุชุจุฑ ูุน ุตูุญุฉ ูุงุญุฏุฉ ุฃููุงู
```

### ุงููุดููุฉ: ุชูุงุฑูุฎ ุบูุฑ ุตุญูุญุฉ

```
ุงูุญู:
1. ุงูุชุญ ุตูุญุฉ ูุงูุญุต ุตูุบุฉ ุงูุชุงุฑูุฎ
2. ุญุฏุซ parseDate() ุฃู hijriToGregorian()
3. ุฃุถู ููุท ุฌุฏูุฏ ูู datePatterns
```

---

## ๐ ุงูุฎุทูุงุช ุงูุชุงููุฉ

### ุงูููุฑ (ุงูููู)

```bash
# 1. ูุณุฎ ุงููููุงุช ุงูุฌุฏูุฏุฉ
cp backend/src/scraper/historical_archive.ts ...
cp backend/src/routes/archive.ts ...

# 2. ุชุญุฏูุซ index.ts
# (ุจุงููุนู ุชู)

# 3. ุจูุงุก TypeScript
cd backend
npm run build

# 4. ุงุฎุชุจุงุฑ ูุตุฏุฑ ูุงุญุฏ ุฃููุงู (10 ุตูุญุงุช ููุท)
curl -X POST http://localhost:8080/api/archive/source/cabinet_decisions \
  -H "Content-Type: application/json" \
  -d '{"maxPages": 10}'
```

### ุงูุฃุณุจูุน ุงูุฃูู

```
Day 1: ุงุฎุชุจุงุฑ ูุตุฏุฑ ูุงุญุฏ
Day 2: ุฅุตูุงุญ ุงูู selectors ุฅุฐุง ูุฒู
Day 3: ุฃุฑุดูุฉ ุดุงููุฉ ูุญุฏูุฏุฉ (50 ุตูุญุฉ)
Day 4: ุฃุฑุดูุฉ ุดุงููุฉ ูุงููุฉ (100+ ุตูุญุฉ)
Day 5: ุงูุชุญูู ูู ุงูุจูุงูุงุช ูุงูุฌูุฏุฉ
```

---

## โ ูุงุฆูุฉ ุงูุชุญูู

- [ ] ูุณุฎ ุงููููุงุช ุงูุฌุฏูุฏุฉ
- [ ] ุจูุงุก TypeScript
- [ ] ุงุฎุชุจุงุฑ ุตูุญุฉ ูุงุญุฏุฉ
- [ ] ุงุฎุชุจุงุฑ ูุตุฏุฑ ูุงุญุฏ (10 ุตูุญุงุช)
- [ ] ูุญุต ุงูุจูุงูุงุช ูู Firestore
- [ ] ุงุฎุชุจุงุฑ ุฃุฑุดูุฉ ุดุงููุฉ
- [ ] ูุญุต ุงูุฅุญุตุงุฆูุงุช
- [ ] ุงูุชุญูู ูู ุนุฏู ุงูุชูุฑุงุฑ

---

## ๐ ุงููุงุฆุฏุฉ

### ูุจู (ุจุฏูู ุงูุฃุฑุดููุฉ)
```
ุงูุชุทุจูู ูุญุชูู ุนูู:
- ุฃุฎุจุงุฑ ุญุฏูุซุฉ ููุท
- ุจุฏูู ุณุฌู ุชุงุฑูุฎู
- ุจุฏูู ูุงุจููุฉ ุงูุจุญุซ ูู ุงูุฃุฎุจุงุฑ ุงููุฏููุฉ
```

### ุจุนุฏ (ูุน ุงูุฃุฑุดููุฉ)
```
ุงูุชุทุจูู ูุญุชูู ุนูู:
- ุฃุฎุจุงุฑ ุญุฏูุซุฉ โ
- 15,000+ ุฎุจุฑ ุชุงุฑูุฎู โ
- ูุงุจููุฉ ุงูุจุญุซ ุงููุงููุฉ โ
- ููุชุจุฉ ููุงููู ุดุงููุฉ โ
```

---

## ๐ฏ ุงูุฎูุงุตุฉ

ุงูุขู ูุฏูู ูุธุงู **ุดุงูู ูููู** ูู:
- โ ุฌูุจ ุงูุฃุฎุจุงุฑ ุงููุฏููุฉ ุชููุงุฆูุงู
- โ ุชุฎุฒูููุง ูู Firestore
- โ ุชุฌูุจ ุงูุชูุฑุงุฑ
- โ ูุนุงูุฌุฉ ุงูุชูุงุฑูุฎ ุจุดูู ุตุญูุญ
- โ ุชุชุจุน ุงูุญุงูุฉ ูุงูุฅุญุตุงุฆูุงุช

**ุงูุชุทุจูู ุงูุขู ูุชูุงูู 100%!** ๐
